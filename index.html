<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style>
  circle {fill: lightblue; stroke: black;}
  #tooltip {
  opacity: 0;
  position: absolute;
  text-align: center;
  width: 60px;
  height: 40px;
  background: white;
  border: 0px;
  }
</style>
<body onload='init()'>


<svg class="scatterplot" width=300 height=300>
</svg>

<div id="tooltip"></div>

<script>
  async function init() {
const data = await 
  d3.csv('https://flunky.github.io/cars2017.csv');

margin = 50
height = 200
width  = 200

x = d3.scaleLog()
     .base(10)
     .domain([10,150])
     .range([0,width])
y = d3.scaleLog()
     .base(10)
     .domain([10,150])
     .range([height,0]);



d3.select('.scatterplot')
     .attr("width" , width  + 2*margin)
     .attr("height", height + 2*margin)
     .append("g")
     .attr("transform",
           "translate("+margin+","+margin+")")
     .selectAll('circle')
        .data(data)
     .enter().append('circle')
     .attr('cx',function(d,i) 
          {return x(d.AverageCityMPG);})
     .attr('cy',function(d,i) 
          {return y(d.AverageHighwayMPG);})
     .attr('r',function(d,i) 
           {return parseInt(d.EngineCylinders)+2;})

 
xAxis = d3.axisBottom(x)
        .tickValues([10,20,50,100])
        .tickFormat(d3.format("~s"))
d3.select('svg')
     .append("g")
     .attr("transform",
           "translate("+margin+","
           +(height+margin)+")")
     .call(xAxis)

yAxis = d3.axisLeft(y)
        .tickValues([10,20,50,100])
        .tickFormat(d3.format("~s"))

d3.select('svg').append("g").attr("transform",
           "translate("+margin+","+margin+")")
  .call(yAxis)
  }
</script>
</body>
</html>
